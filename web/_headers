# Cloudflare Pages Headers Configuration
# This file ensures CheerpJ compatibility and optimal caching

# CRITICAL: JAR files MUST support Range requests for CheerpJ
/*.jar
  Accept-Ranges: bytes
  Content-Type: application/java-archive
  Cache-Control: public, max-age=31536000, immutable
  Access-Control-Allow-Origin: *

# WASM files for libmidi and libmedia
/*.wasm
  Accept-Ranges: bytes
  Content-Type: application/wasm
  Cache-Control: public, max-age=31536000, immutable

# JavaScript files - include Range support
/*.js
  Accept-Ranges: bytes
  Content-Type: application/javascript
  Cache-Control: public, max-age=604800

# CSS files
/*.css
  Accept-Ranges: bytes
  Content-Type: text/css
  Cache-Control: public, max-age=604800

# HTML files - shorter cache for faster updates
/*.html
  Accept-Ranges: bytes
  Content-Type: text/html; charset=utf-8
  Cache-Control: public, max-age=3600

# Service Worker - always fresh
/sw.js
  Accept-Ranges: bytes
  Content-Type: application/javascript
  Cache-Control: public, max-age=0, must-revalidate

# Manifest
/manifest.json
  Content-Type: application/manifest+json
  Cache-Control: public, max-age=86400

# SVG favicon
/favicon.svg
  Content-Type: image/svg+xml
  Cache-Control: public, max-age=604800

# PNG images
/*.png
  Content-Type: image/png
  Cache-Control: public, max-age=604800

# Default for all other files - MUST include Accept-Ranges
/*
  Accept-Ranges: bytes
  X-Content-Type-Options: nosniff
  X-Frame-Options: SAMEORIGIN
  Referrer-Policy: strict-origin-when-cross-origin
